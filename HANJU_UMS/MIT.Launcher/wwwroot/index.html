<!DOCTYPE html>
<html lang="ko"  >
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <title>Hanju utilty monitoring</title>
  <base href="/" />
  <link href="_content/DevExpress.Blazor.Themes/blazing-berry.bs5.css" rel="stylesheet" asp-append-version="true" />
  <!--<link href="_content/DevExpress.Blazor.Themes/blazing-dark.bs5.css" rel="stylesheet" asp-append-version="true" />-->

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-QWTKZyjpPEjISv5WaRU9OFeRpok6YctnYmDr5pNlyT2bRjXh0JMhjY6hW+ALEwIH" crossorigin="anonymous">

  <!--<link href="/css/bootstrap/bootstrap.min.css" rel="stylesheet" >-->


  <script src="/js/jquery-3.7.1.min.js"></script>

  <link href="switcher-resources/css/theme-switcher.css" rel="stylesheet" />
  <link href="switcher-resources/css/themes.css" rel="stylesheet" />
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.8/dist/chart.umd.min.js"></script>
  <!--<script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-zoom"></script>-->


  <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.8/dist/umd/popper.min.js" integrity="sha384-I7E8VVD/ismYTF4hNIPjVp/Zjvgyol6VFvRkX/vR+Vc4jQkC+hVqc2pM8ODewa9r" crossorigin="anonymous"></script>
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.min.js" integrity="sha384-0pUGZvbkm6XF6gxjEnlmuGrJXVbNuzT9qBBavbLwCsOGabYfZo0T0to5eqruptLy" crossorigin="anonymous"></script>

  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.6.0/css/fontawesome.min.css" integrity="sha384-NvKbDTEnL+A8F/AA5Tc5kmMLSJHUO868P+lDtTpJIeQdGYaUIuLr4lVGOEA1OcMy" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.min.css">


  <link href="/css/app.css" rel="stylesheet" />
  <link href="/css/mit_chart.css" rel="stylesheet" />


  <link rel="manifest" href="/js/manifest.json" />
  <script src="/js/install.js"></script>
  <!-- hammerjs CDN -->
  <script src="https://cdn.jsdelivr.net/npm/hammerjs@2.0.8/hammer.min.js"></script>

  <!-- chartjs-plugin-zoom (필요시) -->
  <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-zoom@2.0.1/dist/chartjs-plugin-zoom.min.js"></script>

  <script type="module" src="/js/mit_chart.js"></script>






</head><body>
    <div id="switcher-container" data-permanent>

        <link rel="stylesheet" href="_content/DevExpress.Blazor.Themes/blazing-berry.bs5.min.css" dx-theme-link="">
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/9.15.6/styles/androidstudio.min.css" hl-theme-link="">
        <link rel="stylesheet" href="/css/mitapp.css" mit-theme-link />
        <link rel="stylesheet" href="/css/license.css" mit-license-link />

    </div>

    <button class="btn" id="install" hidden style="inset-inline-end: 10rem; inset-block-start: 3rem; position: absolute; z-index: 9999; color: black; top: 0px;">앱 설치</button>

    <div id="app">
        <img src="/images/t/hanju_Logo_Splash.gif" style="width:100%;" />
    </div>


    <script src="_framework/blazor.webassembly.js"></script>
    <script src="js/yourInteropFile.js"></script>
    <script src="js/app.js"></script>



    <script type="text/javascript">





        window.downloadFileFromStream = async (fileName, contentStreamReference) => {
            $('#pdfcont').text(contentStreamReference);
            $('#pdfdown').submit();
        }

        window.printViewFromStream = async (fileName, contentStreamReference) => {
            //alert('kk');

            $('#printcont').text(contentStreamReference);

            //var gsWin = window.open("about:blank", "winName");
            //var frm = document.printdown;
            //frm.action = 'http://localhost:44403/documentviewer';
            //frm.target = "winName";
            //frm.submit();




            //alert('kk2');
            $('#printdown').submit();
            //alert('kk3');
        }


        const basePrintUrl = "https://umsrpt.hanjucorp.co.kr/";

        window.printFromStream = async (fileName, docUrl, contentStreamReference) => {
            $('#printcont2').text(contentStreamReference);
            $('#printcall').attr('action', basePrintUrl + docUrl);
            $('#printcall').submit();
        }


        //window.operationStatusPrint = async (fileName, contentStreamReference) => {
        //    alert('kk');
        //    $('#printcont111').text(contentStreamReference);
        //    $('#printcall111').submit();
        //    alert('kk3');
        //}







        function setCookie(name, value, days) {
            var expires = "";
            if (days) {
                var date = new Date();
                date.setTime(date.getTime() + (days * 24 * 60 * 60 * 1000));
                expires = "; expires=" + date.toUTCString();
            }
            document.cookie = name + "=" + (value || "") + expires + "; path=/";
        }

        function getCookie(name) {
            var nameEQ = name + "=";
            var ca = document.cookie.split(';');
            for (var i = 0; i < ca.length; i++) {
                var c = ca[i];
                while (c.charAt(0) == ' ') c = c.substring(1, c.length);
                if (c.indexOf(nameEQ) == 0) return c.substring(nameEQ.length, c.length);
            }
            return null;
        }














    </script>



    <!--<form id="pdfdown" method="post" action="http://localhost:44403/exportPdf" target="_blank" style="display: none; " -->
    <form id="pdfdown" method="post" action="https://umsrpt.hanjucorp.co.kr/exportPdf" target="_blank" style="display: none; ">

        <textarea id="pdfcont" name="rpt"></textarea>-->
    </form>





    <form id="printcall" method="post" action="https://umsrpt.hanjucorp.co.kr/documentviewer2" target="_blank" style="display: none; ">
        <textarea id="printcont2" name="rpt"></textarea>
    </form>


    <!--<form id="printcall111" method="post" action="http://localhost:44403/opviewer" target="_blank" style="display: none; ">
        <textarea id="printcont111" name="rpt"></textarea>
    </form>-->


    

    <style>
        
/*웹에서 라이센스를 표현이 기능하다고 생각한껄까??*/
.dx-license-wrapper, .dx-license-wrapper > dx-license {
    opacity: 0 !important;        
    pointer-events: none !important; 
    width: 0 !important;
    height: 0 !important;
    overflow: hidden !important;
    position: absolute !important; 
}
</style>

<script>
(function() {
    // dx-license를 wrapper로 감싸는 함수
    function wrapDxLicense(dx) {
        if(!dx || dx.parentElement.classList.contains('dx-license-wrapper')) return;

        const wrapper = document.createElement('div');
        wrapper.className = 'dx-license-wrapper';
        dx.parentNode.insertBefore(wrapper, dx);
        wrapper.appendChild(dx);
    }

    // 초기 페이지 로드 시 존재하는 dx-license 감싸기
    document.querySelectorAll('dx-license').forEach(wrapDxLicense);

    // 새로 생기는 dx-license도 감싸기 위해 감시
    const observer = new MutationObserver((mutations) => {
        mutations.forEach(mutation => {
            mutation.addedNodes.forEach(node => {
                if(node.nodeType === 1) { // ELEMENT_NODE
                    if(node.tagName === 'DX-LICENSE') {
                        wrapDxLicense(node);
                    }
                    // node 내부에 dx-license가 있을 경우도 감싸기
                    node.querySelectorAll && node.querySelectorAll('dx-license').forEach(wrapDxLicense);
                }
            });
        });
    });

    observer.observe(document.body, { childList: true, subtree: true });
})();
</script>



</body></html>