@{
    /*
     * 작성자명 : 김지수
     * 작성일자 : 25-02-04
     * 최종수정 : 25-02-11
     * 화면명: 5분주기 전기 공급 현황
     * 프로시저 : P_HMI_ELEC_SERV_THREE_TIME_RST, P_HMI_ELEC_SERV_THREE_TIME_RST2
    */
}

@using MIT.Razor.Pages.Component.Grid
@using MIT.Razor.Pages.Component.Grid.RepositoryItem
@using MIT.Razor.Pages.Component.DataEdits
@inherits UH2050QA1Base


<DxFormLayout CssClass="w-100">
    @{ /* search area */ }
    <DxFormLayoutGroup Caption="조회조건" CssClass="mit-search-area" Decoration="FormLayoutGroupDecoration.Card" ColSpanSm="12">
        <DxFormLayoutItem Caption="공급일" ColSpanSm="3"><CommonDateEdit @ref="@DATE" /></DxFormLayoutItem>
        <DxFormLayoutItem Caption="시작시간(~3시간)" ColSpanSm="3"><CommonTimeEdit @ref="@STIME" DisplayFormat="HH" StringFormat="hh" /></DxFormLayoutItem>
        <DxFormLayoutItem Caption="수용가" ColSpanSm="6"><MitTagBox CodeId="company2" Etc0="PW" @bind-Values="ComValues"/></DxFormLayoutItem>
    </DxFormLayoutGroup>

    @{ /* content area */ }
    <DxFormLayoutGroup Caption="5분주기 전기 공급 현황" CssClass="mit-content-area" Decoration="FormLayoutGroupDecoration.Card" ColSpanSm="12">
        <DxFormLayoutItem ColSpanSm="12">
            <CommonGrid @ref="Grd1" CssClass="setting-program-grid mit-grid">
                <DataColumnsTemplate> 
                    <DxGridDataColumn Width="120" Caption="수용가"  FieldName="COM_NAME" TextAlignment="GridTextAlignment.Center" CaptionAlignment="GridTextAlignment.Center" FixedPosition="GridColumnFixedPosition.Left"><CellDisplayTemplate Context="context2"><RepositoryItemTextBox CellContext="context2" ReadOnly="true"/></CellDisplayTemplate ></DxGridDataColumn>
                    @* <DxGridDataColumn Width="70" Caption="구분" FieldName="GAUGE_TYPE" TextAlignment="GridTextAlignment.Center" CaptionAlignment="GridTextAlignment.Center"><CellDisplayTemplate Context="context2"><RepositoryItemTextBox CellContext="context2" ReadOnly="true" /></CellDisplayTemplate></DxGridDataColumn> *@
                    @for (int j = 0; j < 3; j++)
                    {
                        @for (int i = 0; i < 12; i++)
                        {
                            <DxGridDataColumn Width="70" Caption="@(GetTimeCaption(int.Parse(SearchedHour) + j, i * 5))" FieldName="@("VAL_"+((j * 12 + i).ToString("00")))" TextAlignment="GridTextAlignment.Right" CaptionAlignment="GridTextAlignment.Center"><CellDisplayTemplate Context="context2"><RepositoryItemSpinEdit CellContext="context2" ReadOnly="true" DisplayFormat="N0" /></CellDisplayTemplate></DxGridDataColumn>
                        }
                    }
                    <DxGridDataColumn Width="90" Caption="합계" FieldName="COM_TOTAL" TextAlignment="GridTextAlignment.Right" CaptionAlignment="GridTextAlignment.Center"><CellDisplayTemplate Context="context2"><RepositoryItemSpinEdit CellContext="context2" ReadOnly="true" DisplayFormat="N0" /></CellDisplayTemplate></DxGridDataColumn>

                </DataColumnsTemplate>
            </CommonGrid>
        </DxFormLayoutItem>
    </DxFormLayoutGroup>
</DxFormLayout>

@code {
    // 시간 캡션 생성, 하루를 넘어가는 경우 때문에 함수로 따로뺌
    string GetTimeCaption(int hour, int minutes)
    {
        string stringHour = (hour > 23) ? (hour - 24).ToString("D2") : hour.ToString("D2");

        return "`" + stringHour + ":" + minutes.ToString("00");
    }
}

<style>

</style>