@{
    /*
    * 작성자명 : 김지수
    * 작성일자 : 25-02-06
    * 최종수정 : 25-02-06
    * 화면명 : 전기 일별 사용량 현황
     * 프로시저 : P_HMI_USE_MONTHELCDAY_SELECT01
    */
}

@using MIT.Razor.Pages.Component.DataEdits
@using MIT.Razor.Pages.Component.Grid
@using MIT.Razor.Pages.Component.Grid.RepositoryItem
@using MIT.Razor.Pages.Component.Charts
@using MIT.UI.UMS
@using System.Data
@using System.Linq
@inherits US2020QA1Base


<DxFormLayout CssClass="w-100">
    @{ /* search area */ }
    <DxFormLayoutGroup Caption="조회조건" CssClass="mit-search-area" Decoration="FormLayoutGroupDecoration.Card" ColSpanSm="12">
        <DxFormLayoutItem Caption="조회년월" ColSpanSm="4"><CommonDateEdit @ref="@YYMM" DisplayFormat="yyyy-MM-dd"/></DxFormLayoutItem>
        <DxFormLayoutItem Caption="수용가" ColSpanSm="4">
            @if (isHanju)
            {
                <MitCombo CodeId="company2" Etc0="PW" @bind-Value="@COM_ID" SelectedItemChanged="COM_Chnage" SearchMode="ListSearchMode.AutoSearch" SearchFilterCondition="ListSearchFilterCondition.Contains" IsAll="true" />
            }
            else
            {
                <CommonTextBox @ref=@ComText ReadOnly="true" />
            }
        </DxFormLayoutItem>
        <DxFormLayoutItem Caption="FDR" ColSpanSm="4">
            @* <MitCombo CodeId="fdr" @bind-Value="@FDR_ID" @ref="FDR_CB" IsDataFixed="false" IsAll="true" /> *@
            <MitTagBox CodeId="FDR_PW" @bind-Values="@FDRValues" @ref="FDR_TB" IsDataFixed="false" />
        </DxFormLayoutItem>
    </DxFormLayoutGroup>

    @{ /* content area */ }
    <DxFormLayoutGroup Caption="전기 일별 사용량 현황" CssClass="mit-content-area" Decoration="FormLayoutGroupDecoration.Card" ColSpanSm="12">
        <DxFormLayoutItem ColSpanSm="12">
            <CommonGrid @ref="Grd1" CssClass="setting-program-grid mit-grid_test2">
                <DataColumnsTemplate> 
                    <DxGridDataColumn Caption="구분" FieldName="DD" TextAlignment="GridTextAlignment.Center" CaptionAlignment="GridTextAlignment.Center"><CellDisplayTemplate Context="context2"><RepositoryItemTextBox CellContext="context2" ReadOnly="true" /></CellDisplayTemplate></DxGridDataColumn>
                    <DxGridBandColumn Caption="사용량(kWh)" CaptionAlignment="GridTextAlignment.Center">
                        <Columns>
                            <DxGridDataColumn Caption="경부하" FieldName="DI_USEQTY_C" TextAlignment="GridTextAlignment.Right" CaptionAlignment="GridTextAlignment.Center"><CellDisplayTemplate Context="context2"><RepositoryItemSpinEdit CellContext="context2" ReadOnly="true" DisplayFormat="N0" /></CellDisplayTemplate></DxGridDataColumn>
                            <DxGridDataColumn Caption="중부하" FieldName="DI_USEQTY_A" TextAlignment="GridTextAlignment.Right" CaptionAlignment="GridTextAlignment.Center"><CellDisplayTemplate Context="context2"><RepositoryItemSpinEdit CellContext="context2" ReadOnly="true" DisplayFormat="N0" /></CellDisplayTemplate></DxGridDataColumn>
                            <DxGridDataColumn Caption="최대부하" FieldName="DI_USEQTY_B" TextAlignment="GridTextAlignment.Right" CaptionAlignment="GridTextAlignment.Center"><CellDisplayTemplate Context="context2"><RepositoryItemSpinEdit CellContext="context2" ReadOnly="true" DisplayFormat="N0" /></CellDisplayTemplate></DxGridDataColumn>
                            <DxGridDataColumn Caption="계" FieldName="DI_USEQTY" TextAlignment="GridTextAlignment.Right" CaptionAlignment="GridTextAlignment.Center"><CellDisplayTemplate Context="context2"><RepositoryItemSpinEdit CellContext="context2" ReadOnly="true" DisplayFormat="N0" /></CellDisplayTemplate></DxGridDataColumn>
                        </Columns>
                    </DxGridBandColumn>
                    <DxGridDataColumn Caption="당월최대전력(kW)" FieldName="PEAK" TextAlignment="GridTextAlignment.Right" CaptionAlignment="GridTextAlignment.Center"><CellDisplayTemplate Context="context2"><RepositoryItemSpinEdit CellContext="context2" ReadOnly="true" DisplayFormat="N0" /></CellDisplayTemplate></DxGridDataColumn>
                    <DxGridDataColumn Caption="평균사용량(kW)" FieldName="D_USEQTY" TextAlignment="GridTextAlignment.Right" CaptionAlignment="GridTextAlignment.Center"><CellDisplayTemplate Context="context2"><RepositoryItemSpinEdit CellContext="context2" ReadOnly="true" DisplayFormat="N0" /></CellDisplayTemplate></DxGridDataColumn>
                </DataColumnsTemplate>
            </CommonGrid>
        </DxFormLayoutItem>
        <MitChartLine HeightStr="200px" XName="DD" YTitles="경부하,중부하,최대부하,계" YNames="DI_USEQTY_C,DI_USEQTY_A,DI_USEQTY_B,DI_USEQTY" IsShowToolTip="true" IsShowLegend="true" @ref="Chart1"></MitChartLine>
    </DxFormLayoutGroup>





</DxFormLayout>

@code {

    private async void COM_Chnage(Razor.Pages.CommCode args)
    {
        FDR_TB.Etc0 = args.Name;
    }
}