@{
    /*
     * 작성자명 : 최동율
     * 작성일자 : 25-08-19 수정중, 컬럼 내용 확인 후 추가 수정 필
     * 최종수정 : 
     * 화면명 : 증기 계량기별 모니터링 현황(관리자)
     * 프로시저 : P_HMI_STEAM_MACH_MNTR_SELECT01, P_HMI_STEAM_PRESS_MNTR_SELECT01, P_HMI_SRPLS_STEAM_MNTR_SELECT01
    */
}

@using MIT.Razor.Pages
@using MIT.Razor.Pages.Common
@using MIT.Razor.Pages.Component.Grid
@using MIT.Razor.Pages.Component.Grid.RepositoryItem
@using System.Data
@using static MIT.Razor.Pages.TrendCode
@inherits UH1050QA1_SBase


<DxFormLayout CssClass="w-100">
    @{ /* content area */ }
    <DxFormLayoutGroup cssClass="mit-content-area" Decoration="FormLayoutGroupDecoration.Card">
    <DxFormLayoutGroup Decoration="FormLayoutGroupDecoration.None" ColSpanSm="6">
        <DxFormLayoutGroup Caption="증기 계량기별 모니터링 현황(관리자)" ColSpanSm="12" Decoration="FormLayoutGroupDecoration.Card">
            <DxFormLayoutItem ColSpanSm="12">
                
                    <CommonGrid @ref="Grd1" CssClass="setting-program-grid mit-grid" RowDoubleClick="OnRowDoubleClick" IsShowToolBar=true>
                        <DataColumnsTemplate>
                            <DxGridDataColumn Caption="점검중" FieldName="Maintenance_YN" TextAlignment="GridTextAlignment.Center" CaptionAlignment="GridTextAlignment.Center" Width="40">
                              <CellDisplayTemplate Context="context2">
                                @if (!string.IsNullOrEmpty(context2.GetRowValue("COM_ID") + "")) {
                                  <a class="badge bg-primary hhh " @onclick=@((args)=> {
                                   DataRowView? row = context2.DataItem as DataRowView;
                                   string newValue = context2.Value+"" == "Y" ? "N" : "Y";
                                   if (row == null) return;
                                   row[context2.DataColumn.FieldName] = newValue;
                                   btn_Save_Maintenance_YN(com_id:row["COM_ID"]+"",gauge_section:"ST", value:newValue);
                                   })>전환</a>
                                }
                              </CellDisplayTemplate>
                            </DxGridDataColumn>

                            <DxGridDataColumn Caption="구분" FieldName="COM_MC" Name="COM_MC" TextAlignment="GridTextAlignment.Center" CaptionAlignment="GridTextAlignment.Center" MinWidth="160">
                              <CellDisplayTemplate Context="context2"><RepositoryItemTextBox CellContext="context2" ReadOnly="true" /></CellDisplayTemplate>
                            </DxGridDataColumn>

                            <DxGridDataColumn Caption="순시(T/H)" FieldName="S01" Name="S01" TextAlignment="GridTextAlignment.Right" CaptionAlignment="GridTextAlignment.Center" MinWidth="70">
                              <CellDisplayTemplate Context="context2">
                                @if (context2.GetRowValue("Maintenance_YN") + "" == "Y") {
                                  <span class="badge bg-danger mit-maintenance-text">점검중</span>
                                }
                                else {
                                  <RepositoryItemSpinEdit ReadOnly="true" CellContext="context2" DisplayFormat="N1" />
                                }
                              </CellDisplayTemplate>
                            </DxGridDataColumn>
                            
                            <DxGridDataColumn Caption="일(TON)" FieldName="S02" Name="S02" TextAlignment="GridTextAlignment.Right" CaptionAlignment="GridTextAlignment.Center" MinWidth="60">
                              <CellDisplayTemplate Context="context2">
                                @if (context2.GetRowValue("Maintenance_YN") + "" == "Y") {
                                  <span class="badge bg-danger mit-maintenance-text">점검중</span>
                                }
                                else {
                                  <RepositoryItemSpinEdit ReadOnly="true" CellContext="context2" DisplayFormat="N1" />
                                }
                              </CellDisplayTemplate>
                            </DxGridDataColumn>
                            
                            <DxGridDataColumn Caption="일(T/H)" FieldName="S03" Name="S03" TextAlignment="GridTextAlignment.Right" CaptionAlignment="GridTextAlignment.Center" MinWidth="60">
                              <CellDisplayTemplate Context="context2">
                                @if (context2.GetRowValue("Maintenance_YN") + "" == "Y") {
                                  <span class="badge bg-danger mit-maintenance-text">점검중</span>
                                }
                                else {
                                  <RepositoryItemSpinEdit ReadOnly="true" CellContext="context2" DisplayFormat="N1" />
                                }
                              </CellDisplayTemplate>
                            </DxGridDataColumn>
                            
                            <DxGridDataColumn Caption="월(TON)" FieldName="S04" Name="S04" TextAlignment="GridTextAlignment.Right" CaptionAlignment="GridTextAlignment.Center" MinWidth="60">
                              <CellDisplayTemplate Context="context2">
                                @if (context2.GetRowValue("Maintenance_YN") + "" == "Y") {
                                  <span class="badge bg-danger mit-maintenance-text">점검중</span>
                                }
                                else {
                                  <RepositoryItemSpinEdit ReadOnly="true" CellContext="context2" DisplayFormat="N1" />
                                }
                              </CellDisplayTemplate>
                            </DxGridDataColumn>
                            
                            <DxGridDataColumn Caption="월(T/H)" FieldName="S05" Name="S05" TextAlignment="GridTextAlignment.Right" CaptionAlignment="GridTextAlignment.Center" MinWidth="80">
                              <CellDisplayTemplate Context="context2">
                                @if (context2.GetRowValue("Maintenance_YN") + "" == "Y") {
                                  <span class="badge bg-danger mit-maintenance-text">점검중</span>
                                }
                                else {
                                  <RepositoryItemSpinEdit ReadOnly="true" CellContext="context2" DisplayFormat="N1" />
                                }
                              </CellDisplayTemplate>
                            </DxGridDataColumn>
                            @*고객사 요청으로 적산량 삭제, 나중에 쓸꺼면 주석풀고사용 : 시안 화면 수정 건 (250310).pptx*@
                            @* <DxGridDataColumn Caption="적산량" FieldName="S06" Name="S06" TextAlignment="GridTextAlignment.Right" CaptionAlignment="GridTextAlignment.Center" MinWidth="105"><CellDisplayTemplate Context="context2"><RepositoryItemSpinEdit CellContext="context2" ReadOnly="true" DisplayFormat="N3" /></CellDisplayTemplate></DxGridDataColumn> *@
                            <DxGridDataColumn Caption="PEAK" FieldName="S07" Name="S07" TextAlignment="GridTextAlignment.Right" CaptionAlignment="GridTextAlignment.Center" MinWidth="60">
                              <CellDisplayTemplate Context="context2">
                                @if (context2.GetRowValue("Maintenance_YN") + "" == "Y") {
                                  <span class="badge bg-danger mit-maintenance-text">점검중</span>
                                }
                                else {
                                  <RepositoryItemSpinEdit ReadOnly="true" CellContext="context2" DisplayFormat="N1" />
                                }
                              </CellDisplayTemplate>
                            </DxGridDataColumn>
                        
                          </DataColumnsTemplate>
                    </CommonGrid>
                
            </DxFormLayoutItem>
        </DxFormLayoutGroup>
    </DxFormLayoutGroup>
    <DxFormLayoutGroup Decoration="FormLayoutGroupDecoration.None" ColSpanSm="6">
        <DxFormLayoutGroup Caption="증기 압력별 모니터링 현황" ColSpanSm="12" Decoration="FormLayoutGroupDecoration.Card">
            <DxFormLayoutItem ColSpanSm="12">
                <CommonGrid @ref="Grd2" CssClass="setting-program-grid">
                    <DataColumnsTemplate>
                        <DxGridDataColumn Caption="점검중" FieldName="Maintenance_YN" TextAlignment="GridTextAlignment.Center" CaptionAlignment="GridTextAlignment.Center" Width="40">
                          <CellDisplayTemplate Context="context2">
                            @if (!string.IsNullOrEmpty(context2.GetRowValue("MC_ID") + "")) {
                              <a class="badge bg-primary hhh " @onclick=@((args)=> {
                               //체크 필
                               DataRowView? row = context2.DataItem as DataRowView;
                               string newValue = context2.Value+"" == "Y" ? "N" : "Y";
                               if (row == null) return;
                               row[context2.DataColumn.FieldName] = newValue;
                               btn_Save_Maintenance_YN(mc_id:row["MC_ID"]+"", value:newValue);
                               })>전환</a>
                            }
                          </CellDisplayTemplate>


                          @*           <CellDisplayTemplate Context="context2">
                                        @if (!string.IsNullOrEmpty(context2.GetRowValue("COM_ID") + "")) {
                                          <a class="badge bg-primary hhh " @onclick=@((args)=> {
                                           DataRowView? row = context2.DataItem as DataRowView;
                                           string newValue = context2.Value+"" == "Y" ? "N" : "Y";
                                           if (row == null) return;
                                           row[context2.DataColumn.FieldName] = newValue;
                                           btn_Save_Maintenance_YN(com_id:row["COM_ID"]+"",gauge_section:"ST", value:newValue);
                                           })>전환</a>
                                        }
                                      </CellDisplayTemplate> *@

                        </DxGridDataColumn>

                        <DxGridDataColumn Caption="구분" FieldName="TYP" TextAlignment="GridTextAlignment.Center" CaptionAlignment="GridTextAlignment.Center" MinWidth="160">
                <CellDisplayTemplate Context="context2">
                  @if (context2.GetRowValue("Maintenance_YN") + "" == "Y") {
                    <span class="badge bg-danger mit-maintenance-text">점검중</span>
                  }
                  else {
                    <RepositoryItemSpinEdit ReadOnly="true" CellContext="context2" DisplayFormat="N1" />
                  }
                </CellDisplayTemplate>
                          
                        </DxGridDataColumn>
                        
                        <DxGridDataColumn Caption="순시(T/H)" FieldName="S01" TextAlignment="GridTextAlignment.Right" CaptionAlignment="GridTextAlignment.Center" MinWidth="70">
                <CellDisplayTemplate Context="context2">
                  @if (context2.GetRowValue("Maintenance_YN") + "" == "Y") {
                    <span class="badge bg-danger mit-maintenance-text">점검중</span>
                  }
                  else {
                    <RepositoryItemSpinEdit ReadOnly="true" CellContext="context2" DisplayFormat="N1" />
                  }
                </CellDisplayTemplate>
                          
                        </DxGridDataColumn>
                        
                        <DxGridDataColumn Caption="일(TON)" FieldName="S02" TextAlignment="GridTextAlignment.Right" CaptionAlignment="GridTextAlignment.Center" MinWidth="60">
                <CellDisplayTemplate Context="context2">
                  @if (context2.GetRowValue("Maintenance_YN") + "" == "Y") {
                    <span class="badge bg-danger mit-maintenance-text">점검중</span>
                  }
                  else {
                    <RepositoryItemSpinEdit ReadOnly="true" CellContext="context2" DisplayFormat="N1" />
                  }
                </CellDisplayTemplate>
                          
                        </DxGridDataColumn>
                        
                        <DxGridDataColumn Caption="일(T/H)" FieldName="S03" TextAlignment="GridTextAlignment.Right" CaptionAlignment="GridTextAlignment.Center" MinWidth="60">
                <CellDisplayTemplate Context="context2">
                  @if (context2.GetRowValue("Maintenance_YN") + "" == "Y") {
                    <span class="badge bg-danger mit-maintenance-text">점검중</span>
                  }
                  else {
                    <RepositoryItemSpinEdit ReadOnly="true" CellContext="context2" DisplayFormat="N1" />
                  }
                </CellDisplayTemplate>
                          
                        </DxGridDataColumn>
                        
                        <DxGridDataColumn Caption="월(TON)" FieldName="S04" TextAlignment="GridTextAlignment.Right" CaptionAlignment="GridTextAlignment.Center" MinWidth="60">
                <CellDisplayTemplate Context="context2">
                  @if (context2.GetRowValue("Maintenance_YN") + "" == "Y") {
                    <span class="badge bg-danger mit-maintenance-text">점검중</span>
                  }
                  else {
                    <RepositoryItemSpinEdit ReadOnly="true" CellContext="context2" DisplayFormat="N1" />
                  }
                </CellDisplayTemplate>
                          
                        </DxGridDataColumn>
                        
                        <DxGridDataColumn Caption="월(T/H)" FieldName="S05" TextAlignment="GridTextAlignment.Right" CaptionAlignment="GridTextAlignment.Center" MinWidth="80">
                <CellDisplayTemplate Context="context2">
                  @if (context2.GetRowValue("Maintenance_YN") + "" == "Y") {
                    <span class="badge bg-danger mit-maintenance-text">점검중</span>
                  }
                  else {
                    <RepositoryItemSpinEdit ReadOnly="true" CellContext="context2" DisplayFormat="N1" />
                  }
                </CellDisplayTemplate>
                          
                        </DxGridDataColumn>
                        
                        @* <DxGridDataColumn Caption="적산량" FieldName="S06" TextAlignment="GridTextAlignment.Right" CaptionAlignment="GridTextAlignment.Center" MinWidth="105"><CellDisplayTemplate Context="context2"><RepositoryItemSpinEdit CellContext="context2" ReadOnly="true" DisplayFormat="N3" /></CellDisplayTemplate></DxGridDataColumn> *@
                        
                        <DxGridDataColumn Caption="PEAK" FieldName="S07" TextAlignment="GridTextAlignment.Right" CaptionAlignment="GridTextAlignment.Center" MinWidth="60">
                <CellDisplayTemplate Context="context2">
                  @if (context2.GetRowValue("Maintenance_YN") + "" == "Y") {
                    <span class="badge bg-danger mit-maintenance-text">점검중</span>
                  }
                  else {
                    <RepositoryItemSpinEdit ReadOnly="true" CellContext="context2" DisplayFormat="N1" />
                  }
                </CellDisplayTemplate>
                          
                        </DxGridDataColumn>
                    </DataColumnsTemplate>
                </CommonGrid>
            </DxFormLayoutItem>
        </DxFormLayoutGroup>
        <DxFormLayoutGroup Caption="제염 모니터링 현황 및 합계" ColSpanSm="12" Decoration="FormLayoutGroupDecoration.Card">
            <DxFormLayoutItem ColSpanSm="12">
                <CommonGrid @ref="Grd3" CssClass="setting-program-grid">
                    <DataColumnsTemplate>
                      <DxGridDataColumn Caption="점검중" FieldName="" TextAlignment="GridTextAlignment.Center" CaptionAlignment="GridTextAlignment.Center" Width="40">
                        <CellDisplayTemplate Context="context2">
                            @if (!string.IsNullOrEmpty(context2.GetRowValue("MC_ID") + "")) {
                              <a class="badge bg-primary hhh " @onclick=@((args)=> {
                               //체크 필
                               DataRowView? row = context2.DataItem as DataRowView;
                               string newValue = context2.Value+"" == "Y" ? "N" : "Y";
                               if (row == null) return;
                               row[context2.DataColumn.FieldName] = newValue;
                               btn_Save_Maintenance_YN(mc_id:row["MC_ID"]+"", value:newValue);
                               })>전환</a>
                            }
                          </CellDisplayTemplate>
                          </DxGridDataColumn>
                        <DxGridDataColumn Caption="구분" FieldName="TYP" TextAlignment="GridTextAlignment.Center" CaptionAlignment="GridTextAlignment.Center" MinWidth="160">
                          <CellDisplayTemplate Context="context2"><RepositoryItemTextBox CellContext="context2" ReadOnly="true" /></CellDisplayTemplate>
                          
                        </DxGridDataColumn>
                        <DxGridDataColumn Caption="순시(T/H)" FieldName="S01" TextAlignment="GridTextAlignment.Right" CaptionAlignment="GridTextAlignment.Center" MinWidth="70">
                          <CellDisplayTemplate Context="context2">
                            @if (context2.GetRowValue("Maintenance_YN") + "" == "Y") {
                              <span class="badge bg-danger mit-maintenance-text">점검중</span>
                            }
                            else {
                              <RepositoryItemSpinEdit ReadOnly="true" CellContext="context2" DisplayFormat="N1" />
                            }
                          </CellDisplayTemplate>
                          
                        </DxGridDataColumn>
                        <DxGridDataColumn Caption="일(TON)" FieldName="S02" TextAlignment="GridTextAlignment.Right" CaptionAlignment="GridTextAlignment.Center" MinWidth="60">
                          <CellDisplayTemplate Context="context2">
                            @if (context2.GetRowValue("Maintenance_YN") + "" == "Y") {
                              <span class="badge bg-danger mit-maintenance-text">점검중</span>
                            }
                            else {
                              <RepositoryItemSpinEdit ReadOnly="true" CellContext="context2" DisplayFormat="N1" />
                            }
                          </CellDisplayTemplate>
                        </DxGridDataColumn>
                        <DxGridDataColumn Caption="일(T/H)" FieldName="S03" TextAlignment="GridTextAlignment.Right" CaptionAlignment="GridTextAlignment.Center" MinWidth="60">
                          <CellDisplayTemplate Context="context2">
                            @if (context2.GetRowValue("Maintenance_YN") + "" == "Y") {
                              <span class="badge bg-danger mit-maintenance-text">점검중</span>
                            }
                            else {
                              <RepositoryItemSpinEdit ReadOnly="true" CellContext="context2" DisplayFormat="N1" />
                            }
                          </CellDisplayTemplate>
                        </DxGridDataColumn>
                        <DxGridDataColumn Caption="월(TON)" FieldName="S04" TextAlignment="GridTextAlignment.Right" CaptionAlignment="GridTextAlignment.Center" MinWidth="60">
                          <CellDisplayTemplate Context="context2">
                            @if (context2.GetRowValue("Maintenance_YN") + "" == "Y") {
                              <span class="badge bg-danger mit-maintenance-text">점검중</span>
                            }
                            else {
                              <RepositoryItemSpinEdit ReadOnly="true" CellContext="context2" DisplayFormat="N1" />
                            }
                          </CellDisplayTemplate>
                        </DxGridDataColumn>
                        <DxGridDataColumn Caption="월(T/H)" FieldName="S05" TextAlignment="GridTextAlignment.Right" CaptionAlignment="GridTextAlignment.Center" MinWidth="80">
                          <CellDisplayTemplate Context="context2">
                            @if (context2.GetRowValue("Maintenance_YN") + "" == "Y") {
                              <span class="badge bg-danger mit-maintenance-text">점검중</span>
                            }
                            else {
                              <RepositoryItemSpinEdit ReadOnly="true" CellContext="context2" DisplayFormat="N1" />
                            }
                          </CellDisplayTemplate>
                        </DxGridDataColumn>
                        @* <DxGridDataColumn Caption="적산량" FieldName="S06" TextAlignment="GridTextAlignment.Right" CaptionAlignment="GridTextAlignment.Center" MinWidth="105"><CellDisplayTemplate Context="context2"><RepositoryItemSpinEdit CellContext="context2" ReadOnly="true" DisplayFormat="N3" /></CellDisplayTemplate></DxGridDataColumn> *@
                        <DxGridDataColumn Caption="PEAK" FieldName="S07" TextAlignment="GridTextAlignment.Right" CaptionAlignment="GridTextAlignment.Center" MinWidth="60">
                          <CellDisplayTemplate Context="context2">
                            @if (context2.GetRowValue("Maintenance_YN") + "" == "Y") {
                              <span class="badge bg-danger mit-maintenance-text">점검중</span>
                            }
                            else {
                              <RepositoryItemSpinEdit ReadOnly="true" CellContext="context2" DisplayFormat="N1" />
                            }
                          </CellDisplayTemplate>
                        </DxGridDataColumn>
                    </DataColumnsTemplate>
                </CommonGrid>
            </DxFormLayoutItem>
        </DxFormLayoutGroup>
        <DxFormLayoutGroup Caption="잉여증기 모니터링 현황" ColSpanSm="12" Decoration="FormLayoutGroupDecoration.Card">
            <DxFormLayoutItem ColSpanSm="12">
                <CommonGrid @ref="Grd4" CssClass="setting-program-grid" RowDoubleClick="OnRowDoubleClick">
                    <DataColumnsTemplate>
                        <DxGridDataColumn Caption="점검중" FieldName="Maintenance_YN" TextAlignment="GridTextAlignment.Center" CaptionAlignment="GridTextAlignment.Center" Width="40">
                          @* <CellDisplayTemplate Context="context2">
                            @if (!string.IsNullOrEmpty(context2.GetRowValue("MC_ID") + "")) {
                              <a class="badge bg-primary hhh " @onclick=@((args)=> {
                               //체크 필
                               DataRowView? row = context2.DataItem as DataRowView;
                               string newValue = context2.Value+"" == "Y" ? "N" : "Y";
                               if (row == null) return;
                               row[context2.DataColumn.FieldName] = newValue;
                               btn_Save_Maintenance_YN(mc_id:row["MC_ID"]+"", value:newValue);
                               })>전환</a>
                            }
                          </CellDisplayTemplate> *@


                          <CellDisplayTemplate Context="context2">
                            @if (!string.IsNullOrEmpty(context2.GetRowValue("COM_ID") + "")) {
                              <a class="badge bg-primary hhh " @onclick=@((args)=> {
                                DataRowView? row = context2.DataItem as DataRowView;
                                string newValue = context2.Value+"" == "Y" ? "N" : "Y";
                                if (row == null) return;
                                row[context2.DataColumn.FieldName] = newValue;
                                btn_Save_Maintenance_YN(com_id:row["COM_ID"]+"",gauge_section:"ST", value:newValue);
                                })>전환</a>
                            }
                          </CellDisplayTemplate>

                        </DxGridDataColumn>
                        <DxGridDataColumn Caption="구분" FieldName="COM_MC" Name="COM_MC" TextAlignment="GridTextAlignment.Center" CaptionAlignment="GridTextAlignment.Center" MinWidth="160">
                          <CellDisplayTemplate Context="context2"><RepositoryItemTextBox CellContext="context2" ReadOnly="true" /></CellDisplayTemplate>
                              
                        </DxGridDataColumn>
                            <DxGridDataColumn Caption="순시(T/H)" FieldName="S01" Name="S01" TextAlignment="GridTextAlignment.Right" CaptionAlignment="GridTextAlignment.Center" MinWidth="70">
                              <CellDisplayTemplate Context="context2">
                                @if (context2.GetRowValue("Maintenance_YN") + "" == "Y") {
                                  <span class="badge bg-danger mit-maintenance-text">점검중</span>
                                }
                                else {
                                  <RepositoryItemSpinEdit ReadOnly="true" CellContext="context2" DisplayFormat="N1" />
                                }
                              </CellDisplayTemplate>
                          </DxGridDataColumn>
                            <DxGridDataColumn Caption="일(TON)" FieldName="S02" Name="S02" TextAlignment="GridTextAlignment.Right" CaptionAlignment="GridTextAlignment.Center" MinWidth="60">
                            <CellDisplayTemplate Context="context2">
                              @if (context2.GetRowValue("Maintenance_YN") + "" == "Y") {
                                <span class="badge bg-danger mit-maintenance-text">점검중</span>
                              }
                              else {
                                <RepositoryItemSpinEdit ReadOnly="true" CellContext="context2" DisplayFormat="N1" />
                              }
                            </CellDisplayTemplate>
                          </DxGridDataColumn>
                            <DxGridDataColumn Caption="일(T/H)" FieldName="S03" Name="S03" TextAlignment="GridTextAlignment.Right" CaptionAlignment="GridTextAlignment.Center" MinWidth="60">
                            <CellDisplayTemplate Context="context2">
                              @if (context2.GetRowValue("Maintenance_YN") + "" == "Y") {
                                <span class="badge bg-danger mit-maintenance-text">점검중</span>
                              }
                              else {
                                <RepositoryItemSpinEdit ReadOnly="true" CellContext="context2" DisplayFormat="N1" />
                              }
                            </CellDisplayTemplate>
                          </DxGridDataColumn>
                            <DxGridDataColumn Caption="월(TON)" FieldName="S04" Name="S04" TextAlignment="GridTextAlignment.Right" CaptionAlignment="GridTextAlignment.Center" MinWidth="60">
                            <CellDisplayTemplate Context="context2">
                              @if (context2.GetRowValue("Maintenance_YN") + "" == "Y") {
                                <span class="badge bg-danger mit-maintenance-text">점검중</span>
                              }
                              else {
                                <RepositoryItemSpinEdit ReadOnly="true" CellContext="context2" DisplayFormat="N1" />
                              }
                            </CellDisplayTemplate>
                          </DxGridDataColumn>
                            <DxGridDataColumn Caption="월(T/H)" FieldName="S05" Name="S05" TextAlignment="GridTextAlignment.Right" CaptionAlignment="GridTextAlignment.Center" MinWidth="80">
                            <CellDisplayTemplate Context="context2">
                              @if (context2.GetRowValue("Maintenance_YN") + "" == "Y") {
                                <span class="badge bg-danger mit-maintenance-text">점검중</span>
                              }
                              else {
                                <RepositoryItemSpinEdit ReadOnly="true" CellContext="context2" DisplayFormat="N1" />
                              }
                            </CellDisplayTemplate>
                          </DxGridDataColumn>
                            @* <DxGridDataColumn Caption="적산량" FieldName="S06" Name="S06" TextAlignment="GridTextAlignment.Right" CaptionAlignment="GridTextAlignment.Center" MinWidth="105"><CellDisplayTemplate Context="context2"><RepositoryItemSpinEdit CellContext="context2" ReadOnly="true" DisplayFormat="N3" /></CellDisplayTemplate></DxGridDataColumn> *@
                            <DxGridDataColumn Caption="PEAK" FieldName="S07" Name="S07" TextAlignment="GridTextAlignment.Right" CaptionAlignment="GridTextAlignment.Center" MinWidth="60">
                            <CellDisplayTemplate Context="context2">
                              @if (context2.GetRowValue("Maintenance_YN") + "" == "Y") {
                                <span class="badge bg-danger mit-maintenance-text">점검중</span>
                              }
                              else {
                                <RepositoryItemSpinEdit ReadOnly="true" CellContext="context2" DisplayFormat="N1" />
                              }
                            </CellDisplayTemplate>
                          </DxGridDataColumn>
                    </DataColumnsTemplate>
                </CommonGrid>
            </DxFormLayoutItem>
        </DxFormLayoutGroup>
    </DxFormLayoutGroup>
    </DxFormLayoutGroup>
</DxFormLayout>

<style>
</style>
@code {
    private void OnRowDoubleClick(GridRowClickEventArgs e)
    {
        if (CommonPopupService != null)
        {
            // 소계 합계는 눌러도 안나오게..
            var com_mc = (e.Grid.GetRowValue(e.VisibleIndex, "COM_MC") + "");
            if (com_mc == "합 계" || com_mc == "잉여증기계") return;

            // com_id
            var com_id = (e.Grid.GetRowValue(e.VisibleIndex, "COM_ID") + "");

            // mc..
            var mc_id = (e.Grid.GetRowValue(e.VisibleIndex, "MC_ID") + "");

            TrendCode tc = new TrendCode() { ComId = com_id, FdrId = mc_id, GaugeType = GAUGE_TYPE.ST};
            
            switch (e.Column.Name)
            {
                case "COM_MC":
                    tc.TrendType = TrendTypeEnum.Real;
                    break;
                case "S01": // 실시간
                    tc.TrendType = TrendTypeEnum.Real;
                    break;
                case "S02": // 일(TON)
                case "S03": // 일(T/H)
                    tc.TrendType = TrendTypeEnum.Day;
                    break;
                case "S04": // 월(TON)
                case "S05": // 월(T/H)
                    tc.TrendType = TrendTypeEnum.Month;
                    tc.CompreDate = tc.CompreDate.AddMonths(-1);
                    break;
                case "S07": // 당월 PEAK
                    tc.TrendType = TrendTypeEnum.CurMonth;
                    tc.CompreDate = tc.CompreDate.AddMonths(-1);
                    break;
            }

            CommonPopupService.Show(typeof(UH1070QA1_POP), "Trend View", Width: 1280, Height: 740, Parameter: tc, CloseCallback: OnCloseCallback);
        }
    }


    protected async Task OnCloseCallback(PopupResult result)
    {

        if (result.PopupResultType != PopupResultType.OK) return;
        await Task.Delay(1);

    }





}
